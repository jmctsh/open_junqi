# 四国军棋游戏

一个基于PyQt6的四国军棋桌面游戏，支持AI玩家和网络对战。

## 功能特性

- 🎮 完整的四国军棋游戏规则实现
- 🖥️ 现代化的Qt GUI界面
- 🤖 支持AI玩家（待开发）
- 🌐 WebSocket网络对战支持
- 🎯 四暗模式（只能看到自己的棋子）
- 🏷️ 棋子标记功能
- 🎲 自动布局功能

## 游戏规则

### 基本规则
- 四人游戏，对家为队友（2v2）
- 四暗模式：只能看到自己的棋子
- 军旗被夺取的玩家出局，所有棋子消失

### 棋子说明
- **司令**：最大的棋子
- **军长、师长、旅长、团长、营长、连长、排长**：按等级递减
- **工兵**：最小，但可以挖地雷，在铁路上可以拐弯
- **炸弹**：可与任何敌方单位同归于尽，不能放在第一排
- **地雷**：不能移动，只能放在后两排，只有工兵可以挖除
- **军旗**：只能放在大本营，被夺取则出局

### 特殊位置
- **行营**：棋子在行营中不能被攻击
- **大本营**：棋子进入后不能移动
- **铁路**：工兵可以在铁路上拐弯移动

## 安装和运行

### 环境要求
- Python 3.8+
- PyQt6

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行游戏
```bash
python main.py
```

### 运行服务器
```bash
python -m server.game_server
```

## 操作说明

### 鼠标操作
- **左键**：选择和移动棋子
- **右键**：标记棋子（司、军、师等）

### 游戏流程
1. 布置棋子（可使用自动布局）
2. 点击"开始游戏"
3. 轮流移动棋子
4. 消灭敌方军旗获胜

## 项目结构

```
junqi_ai/
├── main.py              # 主程序入口
├── requirements.txt     # 依赖包列表
├── game/               # 游戏核心模块
│   ├── __init__.py
│   ├── piece.py        # 棋子定义
│   ├── board.py        # 棋盘逻辑
│   ├── game_logic.py   # 游戏逻辑控制
│   └── game_window.py  # GUI界面
├── server/             # 网络服务器
│   ├── __init__.py
│   └── game_server.py  # WebSocket服务器
└── README.md           # 项目说明
```

## API接口

### WebSocket消息格式

#### 移动棋子
```json
{
    "type": "move_piece",
    "from_row": 0,
    "from_col": 0,
    "to_row": 1,
    "to_col": 0
}
```

#### 设置标记
```json
{
    "type": "set_mark",
    "row": 0,
    "col": 0,
    "mark": "司"
}
```

#### 自动布局
```json
{
    "type": "auto_layout"
}
```

## 开发计划

- [ ] 完善游戏规则验证
- [ ] 添加AI玩家支持
- [ ] 优化网络同步
- [ ] 添加游戏回放功能
- [ ] 支持自定义主题

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 许可证

MIT License