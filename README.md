# 军棋旗舰

一个可视化的军棋对战与演示程序，支持四方（南/西/北/东）对战、铁路规则、行营/大本营、即时淘汰等核心机制。

## 安装与运行

- 依赖安装：
  - Python 3.10+
  - `pip install -r requirements.txt`
- 启动程序：
  - `python main.py`

## 基本玩法

标准军棋四暗模式的规则。地雷只能工兵挖，其他子撞地雷地雷不会消失。司令阵亡会翻开军旗。当军旗被扛或没有可以移动的子时玩家立即阵亡。对轴为一队，当一队玩家全部阵亡，游戏结束。

## AI 代理玩家

接入豆包/ARK API，支持多个 AI 玩家自主决策并轮流发言。

### 环境配置（服务器模式）

请参考仓库根目录的 `.env.example`，按注释提示复制为 `.env` 并填写各玩家的 ARK API 与 TTS 凭据即可。

## 战绩标记（升星）

- 累计击杀数：每个棋子都记录自身的 `击杀数`（kill_count）。战斗时，胜者会继承败者的战绩并再加 1：
  - 攻击方胜利：攻击方 `kill_count += 防守方.kill_count + 1`。
  - 防守方胜利：防守方 `kill_count += 攻击方.kill_count + 1`。
- 显示规则：在棋子右下角绘制战绩标记（洋红色），随棋子移动；棋子死亡则不显示。
  - 1/2 杀：显示"^"形标记（较小号、细线）。
  - 3 杀及以上：显示小五角星（整体缩小一号，贴近右下角）。

## 自定义标记

- 右键已有棋子弹出标记菜单，可为该棋子设置一个简短标记，例如：`司、军、师、旅、团、营、连、排、工、炸、雷、旗`，或选择"清除"删除标记。
- 允许对自己的棋子使用标记，以记录假炸弹、假令等伪装设定。
- 标记会跟随棋子移动；当棋子死亡时，其标记会自动清除。

## 许可证

本作品采用知识共享署名-非商业性使用 4.0 国际许可协议（CC BY-NC 4.0）进行许可。

您可以自由地复制、分发、展示和演绎本作品，但必须遵守以下条件：
- 署名（BY）：您必须适当署名，注明原作者，并提供本许可证的链接。
- 非商业性使用（NC）：您不得将本作品用于任何商业目的，包括但不限于：
  1. 以盈利为目的的直播活动（如带货直播、付费直播等）
  2. 用于商业性质的视频制作（如广告视频、付费课程视频、企业宣传视频等）
  3. 其他任何形式的商业盈利行为

完整许可文本请参见：https://creativecommons.org/licenses/by-nc/4.0/legalcode

## 贡献与派生使用（Fork）

- 欢迎 Fork 本仓库用于学习、研究与非商业交流。
- 在 Fork 基础上进行修改、增加功能、二次开发是允许的，但必须遵守 CC BY-NC 4.0：保留署名、提供许可证链接、不得用于任何商业目的。
- 发布派生版本时，请在 README 中注明来源链接与原作者；保留本仓库的许可证段落或以醒目位置链接至完整许可文本。
- 欢迎通过 Pull Request 贡献改进；提交前请确保不包含任何敏感凭据或密钥。
- 若用于公开演示/教学，请附上协议与来源说明。